## Distributed Network

14.

由于头部占有 20 字节，分片数=2380/680=4，在各个分片中：

（1）每个分片都标有标识号422

（2）前 3 个分片大小为 700 字节，  第 4 个分片大小为 2400-680*3=360 字节 

（3）片偏移分别为 0, 85, 170, 255 

（4）前 3 个分片的标志为 1，第 4 个的标志为 0。

16.

a. 3 个家庭主机分配：192.168.1.0，192.168.1.1，192.168.1.2；NAT 路由器的局域网端：192.168.1.3。 

b. 

| WAN端               | LAN端             |
| ------------------- | ----------------- |
| 24.34.112.235，5001 | 192.168.1.0，3345 |
| 24.34.112.235，5002 | 192.168.1.0，3346 |
| 24.34.112.235，5003 | 192.168.1.1，3345 |
| 24.34.112.235，5004 | 192.168.1.1，3346 |
| 24.34.112.235，5005 | 192.168.1.2，3345 |
| 24.34.112.235，5006 | 192.168.1.2，3346 |

19.

![](https://cchw-1257198376.cos.ap-chengdu.myqcloud.com/test/clipboard_20200430112704.png)

分组交换机s2的转发规则如下：

| 匹配                                            | 转发    | 解释                                                         |
| ----------------------------------------------- | ------- | ------------------------------------------------------------ |
| 从端口1进入，源为10.3.\*.\*，目的地为10.1.\*.\* | 至端口2 | 即满足：在端口1，源为h5或h6、目的地为h1或h2的数据报，转发至端口2 |
| 从端口2进入，源为10.1.\*.\*，目的地为10.3.\*.\* | 至端口1 | 即满足：在端口2，源为h1或h2、目的地为h5或h6的数据报，转发至端口1 |
| 从端口1进入，目的地为10.2.0.3                   | 至端口3 | 即满足：在端口1，目的地为h3的数据包，都转发到指定的主机h3    |
| 从端口1进入，目的地为10.2.0.4                   | 至端口4 | 即满足：在端口1，目的地为h4的数据包，都转发到指定的主机h4    |
| 从端口2进入，目的地为10.2.0.3                   | 至端口3 | 即满足：在端口2，目的地为h3的数据包，都转发到指定的主机h3    |
| 从端口2进入，目的地为10.2.0.4                   | 至端口4 | 即满足：在端口2，目的地为h4的数据报，都转发到指定的主机h4    |
| 从端口3进入                                     | 至端口4 | 主机h3可以向h4发送数据报                                     |
| 从端口4进入                                     | 至端口3 | 主机h4可以向h3发送数据报                                     |

